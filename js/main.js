// Translations
const translations = {
    pl: {
        nav: {
            home: "Start",
            services: "Oferta",
            gallery: "Realizacje",
            about: "O nas",
            contact: "Kontakt"
        },
        hero: {
            title: "Usługi <span>Spawalnicze</span>",
            name: "Rafał Majcherczak",
            subtitle: "Kompleksowe usługi spawalnicze oraz wykonawstwo konstrukcji metalowych na wymiar. Bramy, ogrodzenia, balustrady i więcej.",
            btn1: "Nasza Oferta",
            btn2: "Kontakt"
        },
        services: {
            title: "Nasza Oferta",
            subtitle: "Kompleksowe usługi spawalnicze i metalowe",
            gates: {
                title: "Bramy i Furtki",
                desc: "Projektowanie i wykonawstwo bram wjazdowych oraz furtek. Indywidualne projekty dopasowane do charakteru posesji."
            },
            fences: {
                title: "Ogrodzenia",
                desc: "Solidne ogrodzenia posesji z metalu. Trwałe, estetyczne i bezpieczne rozwiązania dla Twojej nieruchomości."
            },
            railings: {
                title: "Balustrady",
                desc: "Balustrady wewnętrzne i zewnętrzne. Nowoczesne i klasyczne wzory wykonane z dbałością o każdy detal."
            },
            stairs: {
                title: "Schody Metalowe",
                desc: "Schody z metalu do wnętrz i na zewnątrz. Funkcjonalne i eleganckie konstrukcje na lata."
            },
            constructions: {
                title: "Konstrukcje Stalowe",
                desc: "Konstrukcje stalowe na zamówienie. Wiaty, pergole, zadaszenia i inne elementy metalowe."
            },
            welding: {
                title: "Usługi Spawalnicze",
                desc: "Profesjonalne spawanie różnych metali. Naprawy, modyfikacje i prace spawalnicze na zlecenie."
            }
        },
        gallery: {
            title: "Nasze Realizacje",
            subtitle: "Zobacz przykłady naszych prac"
        },
        about: {
            title: "O Firmie",
            subtitle: "Usługi Spawalnicze Rafał Majcherczak",
            heading: "Jakość i Profesjonalizm",
            text1: "Usługi Spawalnicze Rafał Majcherczak to firma specjalizująca się w kompleksowych usługach spawalniczych oraz wykonawstwie konstrukcji metalowych na wymiar.",
            text2: "Stawiamy na wysoką jakość wykonania, precyzję spawania oraz trwałe materiały, które gwarantują bezpieczeństwo i długą żywotność naszych realizacji.",
            text3: "Każde zlecenie traktujemy indywidualnie — od projektu, przez wykonanie, aż po montaż.",
            stat1: "Zaangażowania",
            stat2: "Rodzajów usług",
            stat3: "Gwarancja jakości"
        },
        contact: {
            title: "Kontakt",
            subtitle: "Skontaktuj się z nami",
            heading: "Dane Kontaktowe"
        },
        footer: {
            copyright: "&copy; 2026 Usługi Spawalnicze Rafał Majcherczak. Wszelkie prawa zastrzeżone."
        }
    },
    en: {
        nav: {
            home: "Home",
            services: "Services",
            gallery: "Gallery",
            about: "About",
            contact: "Contact"
        },
        hero: {
            title: "Welding <span>Services</span>",
            name: "Rafał Majcherczak",
            subtitle: "Comprehensive welding services and custom metal constructions. Gates, fences, railings and more.",
            btn1: "Our Services",
            btn2: "Contact"
        },
        services: {
            title: "Our Services",
            subtitle: "Comprehensive welding and metal services",
            gates: {
                title: "Gates & Wickets",
                desc: "Design and construction of entrance gates and wickets. Individual projects tailored to the character of the property."
            },
            fences: {
                title: "Fences",
                desc: "Solid metal fences. Durable, aesthetic and safe solutions for your property."
            },
            railings: {
                title: "Railings",
                desc: "Interior and exterior railings. Modern and classic designs made with attention to every detail."
            },
            stairs: {
                title: "Metal Stairs",
                desc: "Metal stairs for interiors and exteriors. Functional and elegant constructions for years."
            },
            constructions: {
                title: "Steel Constructions",
                desc: "Custom steel constructions. Carports, pergolas, roofings and other metal elements."
            },
            welding: {
                title: "Welding Services",
                desc: "Professional welding of various metals. Repairs, modifications and welding work on request."
            }
        },
        gallery: {
            title: "Our Projects",
            subtitle: "See examples of our work"
        },
        about: {
            title: "About Us",
            subtitle: "Welding Services Rafał Majcherczak",
            heading: "Quality and Professionalism",
            text1: "Welding Services Rafał Majcherczak is a company specializing in comprehensive welding services and custom metal constructions.",
            text2: "We focus on high quality workmanship, welding precision and durable materials that guarantee safety and long life of our projects.",
            text3: "We treat every order individually — from design, through execution, to installation.",
            stat1: "Commitment",
            stat2: "Types of services",
            stat3: "Quality guarantee"
        },
        contact: {
            title: "Contact",
            subtitle: "Get in touch with us",
            heading: "Contact Details"
        },
        footer: {
            copyright: "&copy; 2026 Welding Services Rafał Majcherczak. All rights reserved."
        }
    },
    nl: {
        nav: {
            home: "Home",
            services: "Diensten",
            gallery: "Projecten",
            about: "Over ons",
            contact: "Contact"
        },
        hero: {
            title: "Las<span>diensten</span>",
            name: "Rafał Majcherczak",
            subtitle: "Uitgebreide lasdiensten en metaalconstructies op maat. Poorten, hekken, balustrades en meer.",
            btn1: "Onze Diensten",
            btn2: "Contact"
        },
        services: {
            title: "Onze Diensten",
            subtitle: "Uitgebreide las- en metaaldiensten",
            gates: {
                title: "Poorten & Hekjes",
                desc: "Ontwerp en constructie van toegangspoorten en hekjes. Individuele projecten aangepast aan het karakter van het terrein."
            },
            fences: {
                title: "Hekwerken",
                desc: "Solide metalen hekwerken. Duurzame, esthetische en veilige oplossingen voor uw eigendom."
            },
            railings: {
                title: "Balustrades",
                desc: "Binnen- en buitenbalustrades. Moderne en klassieke ontwerpen gemaakt met aandacht voor elk detail."
            },
            stairs: {
                title: "Metalen Trappen",
                desc: "Metalen trappen voor binnen en buiten. Functionele en elegante constructies voor jaren."
            },
            constructions: {
                title: "Staalconstructies",
                desc: "Staalconstructies op maat. Carports, pergola's, overkappingen en andere metalen elementen."
            },
            welding: {
                title: "Lasdiensten",
                desc: "Professioneel lassen van diverse metalen. Reparaties, modificaties en laswerk op aanvraag."
            }
        },
        gallery: {
            title: "Onze Projecten",
            subtitle: "Bekijk voorbeelden van ons werk"
        },
        about: {
            title: "Over Ons",
            subtitle: "Lasdiensten Rafał Majcherczak",
            heading: "Kwaliteit en Professionaliteit",
            text1: "Lasdiensten Rafał Majcherczak is een bedrijf gespecialiseerd in uitgebreide lasdiensten en metaalconstructies op maat.",
            text2: "Wij richten ons op hoogwaardig vakmanschap, lasprecisie en duurzame materialen die veiligheid en een lange levensduur van onze projecten garanderen.",
            text3: "Wij behandelen elke opdracht individueel — van ontwerp, via uitvoering, tot montage.",
            stat1: "Toewijding",
            stat2: "Soorten diensten",
            stat3: "Kwaliteitsgarantie"
        },
        contact: {
            title: "Contact",
            subtitle: "Neem contact met ons op",
            heading: "Contactgegevens"
        },
        footer: {
            copyright: "&copy; 2026 Lasdiensten Rafał Majcherczak. Alle rechten voorbehouden."
        }
    }
};

function getTranslation(lang, key) {
    const keys = key.split('.');
    let value = translations[lang];
    for (const k of keys) {
        if (value && value[k]) {
            value = value[k];
        } else {
            return null;
        }
    }
    return value;
}

function setLanguage(lang) {
    document.documentElement.lang = lang;

    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        const translation = getTranslation(lang, key);
        if (translation) {
            element.innerHTML = translation;
        }
    });

    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.remove('active');
        if (btn.getAttribute('data-lang') === lang) {
            btn.classList.add('active');
        }
    });

    localStorage.setItem('language', lang);
}

document.querySelectorAll('.lang-btn').forEach(btn => {
    btn.addEventListener('click', () => {
        const lang = btn.getAttribute('data-lang');
        setLanguage(lang);
    });
});

const savedLang = localStorage.getItem('language') || 'pl';
setLanguage(savedLang);

// Mobile menu toggle
const menuToggle = document.getElementById('menuToggle');
const navLinks = document.getElementById('navLinks');

menuToggle.addEventListener('click', () => {
    navLinks.classList.toggle('active');
});

// Close menu when clicking a link
document.querySelectorAll('.nav-links a').forEach(link => {
    link.addEventListener('click', () => {
        navLinks.classList.remove('active');
    });
});

// Smooth scrolling
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
            target.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        }
    });
});

// Navbar background on scroll
window.addEventListener('scroll', () => {
    const nav = document.querySelector('nav');
    if (window.scrollY > 100) {
        nav.style.background = 'rgba(15, 23, 42, 0.98)';
        nav.style.boxShadow = '0 2px 10px rgba(0, 0, 0, 0.3)';
    } else {
        nav.style.background = 'var(--darker)';
        nav.style.boxShadow = 'none';
    }
});

// Lightbox
const lightbox = document.getElementById('lightbox');
const lightboxImg = document.getElementById('lightboxImg');
const lightboxClose = document.getElementById('lightboxClose');
const lightboxPrev = document.getElementById('lightboxPrev');
const lightboxNext = document.getElementById('lightboxNext');
const galleryItems = document.querySelectorAll('.gallery-item img');

let currentIndex = 0;

function openLightbox(index) {
    currentIndex = index;
    lightboxImg.src = galleryItems[index].src;
    lightbox.classList.add('active');
    document.body.style.overflow = 'hidden';
}

function closeLightbox() {
    lightbox.classList.remove('active');
    document.body.style.overflow = '';
}

function showPrev() {
    currentIndex = (currentIndex - 1 + galleryItems.length) % galleryItems.length;
    lightboxImg.src = galleryItems[currentIndex].src;
}

function showNext() {
    currentIndex = (currentIndex + 1) % galleryItems.length;
    lightboxImg.src = galleryItems[currentIndex].src;
}

galleryItems.forEach((img, index) => {
    img.addEventListener('click', () => openLightbox(index));
});

lightboxClose.addEventListener('click', closeLightbox);
lightboxPrev.addEventListener('click', showPrev);
lightboxNext.addEventListener('click', showNext);

lightbox.addEventListener('click', (e) => {
    if (e.target === lightbox) {
        closeLightbox();
    }
});

document.addEventListener('keydown', (e) => {
    if (!lightbox.classList.contains('active')) return;
    if (e.key === 'Escape') closeLightbox();
    if (e.key === 'ArrowLeft') showPrev();
    if (e.key === 'ArrowRight') showNext();
});
